## PR #19マージ後の次のステップ：品質向上と最終化に向けた計画

PR #19のマージ、おめでとうございます。これにより、宣言的アーキテクチャの基本的なエンドツーエンドのフローが完成しました。次のステップとして、システムの「頭脳」と「品質保証」をさらに強化し、プロジェクトを完成させるための具体的な計画を以下に提案します。

### 目標

現在の「動く」状態から、より「賢く、信頼できる」状態へと進化させること。具体的には、LLMによるYAML生成の精度を向上させ、アプリケーション全体の品質を保証する自動テスト体制を確立します。

### 計画の概要

推奨される次のステップは、以下の2つの独立したタスクに分かれます。これらは並行して進めることも、順次進めることも可能です。

1.  **Task A: LLMパイプラインのアップグレード（PR #22の統合）**
2.  **Task B: E2Eテストの強化（PR #23の統合）**

--- 

### Task A: LLMパイプラインのアップグレード

**目的**: 現在のLLM連携部分を、PR #22で実装された、より高度で洗練されたマルチエージェントパイプラインに置き換えることで、`workflow.yaml`生成の品質と安定性を向上させます。

| タスクNo. | タスク内容 | 担当 | 完了条件 |
| :--- | :--- | :--- | :--- |
| **A.1** | **LLMエージェント群のコード移植** | バックエンド | PR #22の`backend/app/agents/`ディレクトリ全体を、現在の`main`ブランチにコピーする。 |
| **A.2** | **`GenerationPipeline`の置換** | バックエンド | `backend/app/services/workflow_pipeline.py`内の`GenerationPipeline`を、移植したエージェント群（`RequirementsDecompositionAgent`, `SpecificationValidatorAgent`など）を順次呼び出すロジックに完全に置き換える。 |
| **A.3** | **APIの適応** | バックエンド | `backend/app/conversation_api.py`のエンドポイントが、新しいパイプラインと正しく連携するよう、インターフェースを調整する。 |
| **A.4** | **単体・結合テスト** | バックエンド | 新しいパイプラインが、ユーザープロンプトから`workflow.yaml`を正しく生成できることを確認するテストを実行する。 |

### Task B: E2Eテストの強化

**目的**: 現在の基本的なテストを、PR #23で実装された、より網羅的で信頼性の高いPlaywrightによるE2Eテストスイートに置き換えることで、アプリケーションの品質保証体制を確立します。

| タスクNo. | タスク内容 | 担当 | 完了条件 |
| :--- | :--- | :--- | :--- |
| **B.1** | **E2Eテストコードの置換** | QA/テスト | `tests/e2e/`ディレクトリの内容を、PR #23のテストコードで完全に置き換える。 |
| **B.2** | **CI/CDパイプラインの設定更新** | QA/テスト | `.github/workflows/`内のCI/CD設定ファイルを更新し、新しいE2Eテストスイートが正しく、かつ自動的に実行されるように設定する。 |
| **B.3** | **E2Eテストの実行とパス** | QA/テスト | Task Aでアップグレードされたバックエンドとフロントエンドを結合した環境で、新しいE2Eテストがすべて成功することを確認する。 |

### 最終ステップ

上記2つのタスクが完了すれば、我々のアプリケーションは機能的にも品質的にもほぼ完成した状態となります。その後、最終ステップとして、プロジェクトドキュメントの更新と、旧アーキテクチャに関連する不要なコードのクリーンアップ（タスク3.4.3, 3.4.4）を行い、プロジェクトを正式に完了とします。
